#!/usr/bin/env ruby

require 'yaml'
require 'ruby2d'
require_relative '../lib/game'

config_path = ARGV[0]
raise "config path not specified" if config_path.nil?
raise "config path not found" unless File.exists?(config_path)
config = YAML.safe_load(File.read(config_path))
game = Game.from_config(config, screen_size: 800)

set(
  title: 'github.com/46bit/rts',
  width: game.screen_size,
  height: game.screen_size,
)

update do
  game.tick
end

# on :mouse_down do |event|
#   # puts event.x, event.y
#   if event.button == :left
#     players[0].factory.construct_new
#   end
# end

show
